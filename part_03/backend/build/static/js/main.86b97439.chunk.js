(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var c=t(0),o=t(1),r=t(15),a=t.n(r),s=t(6),i=t(3),u=t(4),d=t.n(u),l="/api/people",j={getAll:function(){return d.a.get(l).then((function(e){return e.data}))},create:function(e){return d.a.post(l,e).then((function(e){return e.data}))},remove:function(e){return d.a.delete("".concat(l,"/").concat(e))},update:function(e){return d.a.put("".concat(l,"/").concat(e.id),e).then((function(e){return e.data}))}},b=function(e){var n=e.filter,t=e.onChange;return Object(c.jsx)("form",{children:Object(c.jsxs)("div",{children:["filter shown with ",Object(c.jsx)("input",{value:n,onChange:t})]})})},f=function(e){return Object(c.jsxs)("form",{children:[Object(c.jsxs)("div",{children:["name: ",Object(c.jsx)("input",{value:e.name,onChange:e.nameOnChange})]}),Object(c.jsxs)("div",{children:["number: ",Object(c.jsx)("input",{value:e.number,onChange:e.numberOnChange})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",onClick:e.addPerson,children:"add"})})]})},h=function(e){var n=e.people,t=e.removePerson;return Object(c.jsx)("div",{children:n.map((function(e){return Object(c.jsxs)("div",{children:[e.name," ",e.number," ",Object(c.jsx)("button",{onClick:function(){t(e)},children:"remove"})]},e.id)}))})},m=function(e){var n=e.notification;return void 0===n?null:Object(c.jsx)("div",{className:n.styleClass,children:n.message})},O=function(){var e=Object(o.useState)([]),n=Object(i.a)(e,2),t=n[0],r=n[1],a=Object(o.useState)(""),u=Object(i.a)(a,2),d=u[0],l=u[1],O=Object(o.useState)(""),v=Object(i.a)(O,2),p=v[0],g=v[1],x=Object(o.useState)(""),C=Object(i.a)(x,2),w=C[0],y=C[1],k=Object(o.useState)(void 0),P=Object(i.a)(k,2),S=P[0],A=P[1];Object(o.useEffect)((function(){j.getAll().then((function(e){r(e)})).catch((function(e){console.log(e)}))}),[]);var D=t.filter((function(e){return e.name.toLowerCase().includes(w.toLowerCase())})),E=function(e){A(e),setTimeout((function(){A(void 0)}),4e3)};return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Phonebook"}),Object(c.jsx)(m,{notification:S}),Object(c.jsx)(b,{filter:w,onChange:function(e){y(e.target.value)}}),Object(c.jsx)("h2",{children:"Add a new person"}),Object(c.jsx)(f,{name:d,nameOnChange:function(e){l(e.target.value)},number:p,numberOnChange:function(e){g(e.target.value)},addPerson:function(e){e.preventDefault();var n=t.find((function(e){return e.name===d}));if(void 0===n){var c={name:d,number:p};j.create(c).then((function(e){E({message:"Added ".concat(e.name),styleClass:"success"}),r(t.concat(e)),l(""),g("")})).catch((function(e){E({message:e.response.data.error,styleClass:"error"}),console.log(e)}))}else if(window.confirm("".concat(n.name," is already added to phonebook. Replace the old number with a new one?"))){var o=Object(s.a)(Object(s.a)({},n),{},{number:p});j.update(o).then((function(e){E({message:"".concat(o.name,"'number has been changed to ").concat(o.number),styleClass:"success"}),r(t.map((function(n){return n.id!==o.id?n:e}))),l(""),g("")})).catch((function(e){E({message:e.response.data.error,styleClass:"error"}),console.log(e)}))}}}),Object(c.jsx)("h2",{children:"Numbers"}),Object(c.jsx)(h,{people:D,removePerson:function(e){window.confirm("Delete ".concat(e.name,"?"))&&j.remove(e.id).then((function(){E({message:"".concat(e.name," has been removed"),styleClass:"success"}),r(t.filter((function(n){return n.id!==e.id})))})).catch((function(n){E({message:n.response.data.error,styleClass:"error"}),r(t.filter((function(n){return n.id!==e.id}))),console.log(n)}))}})]})};t(38);a.a.render(Object(c.jsx)(O,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.86b97439.chunk.js.map